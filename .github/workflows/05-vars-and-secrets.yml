name: Vars and Secrets Demo

on:
  workflow_dispatch:

jobs:
  demo:
    runs-on: ubuntu-latest

    steps:
      - name: Use repository variables (safe to print)
        run: |
          echo "App Name: ${{ vars.APP_NAME }}"
          echo "Deploy Region: ${{ vars.DEPLOY_REGION }}"

      - name: Use secrets safely (DO NOT echo value)
        env:
          API_TOKEN: ${{ secrets.API_TOKEN }}
          DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
        run: |
          echo "Secrets are available as env vars"
          # ❌ NEVER do this:
          # echo "$API_TOKEN"

          # ✅ Safe usage example
          if [ -n "$API_TOKEN" ]; then
            echo "::notice title=Secret Check::API_TOKEN is set"
          fi

      - name: Mixed usage (vars + secrets)
        env:
          APP: ${{ vars.APP_NAME }}
          REGION: ${{ vars.DEPLOY_REGION }}
          TOKEN: ${{ secrets.API_TOKEN }}
        run: |
          echo "Deploying $APP to $REGION"
          # Example command (simulated)
          echo "curl -H 'Authorization: Bearer ***' https://api.example.com/deploy"
